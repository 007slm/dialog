define("#dialog/0.9.0/base-dialog",["#events/0.9.1/events","#overlay/0.9.7/mask","#overlay/0.9.7/overlay","#iframe-shim/0.9.2/iframe-shim","#jquery/1.7.2/jquery","#position/0.9.2/position","#widget/0.9.16/widget","widget/0.9.16/daparser","widget/0.9.16/auto-render","#base/0.9.16/base","base/0.9.16/aspect","base/0.9.16/attribute","#class/0.9.2/class","#widget/0.9.16/daparser","#widget/0.9.16/auto-render"],function(require,exports,module){function toTabed(element){element.attr("tabindex")==null&&element.attr("tabindex","-1")}var $=require("#jquery/1.7.2/jquery"),Overlay=require("#overlay/0.9.7/overlay"),mask=require("#overlay/0.9.7/mask"),Events=require("#events/0.9.1/events"),BaseDialog=Overlay.extend({attrs:{trigger:null,triggerType:"click",zIndex:999,confirmElement:null,cancelElement:null,closeElement:null,titleElement:null,title:"",contentElement:null,content:"",hasMask:!1,onConfirm:function(){},onClose:function(){}},parseElement:function(){BaseDialog.superclass.parseElement.call(this),this.set("trigger",$(this.get("trigger"))),this.set("confirmElement",this.$(this.get("confirmElement"))),this.set("cancelElement",this.$(this.get("cancelElement"))),this.set("closeElement",this.$(this.get("closeElement"))),this.set("titleElement",this.$(this.get("titleElement"))),this.set("contentElement",this.$(this.get("contentElement")))},events:{"click {{attrs.confirmElement}}":"_confirmHandler","click {{attrs.cancelElement}}":"_closeHandler","click {{attrs.closeElement}}":"_closeHandler"},_confirmHandler:function(){this.trigger("confirm")},_closeHandler:function(){this.trigger("close"),this.hide(),this.get("trigger").focus()},delegateEvents:function(){BaseDialog.superclass.delegateEvents.call(this);var that=this;this.get("trigger").bind(this.get("triggerType"),function(e){e.preventDefault(),that.activeTrigger=this,that.show()}),Events.mixTo(this.element[0]),this.element[0].on("confirm",this._confirmHandler,this),this.element[0].on("close cancel",this._closeHandler,this)},show:function(){return BaseDialog.superclass.show.call(this)},hide:function(){return BaseDialog.superclass.hide.call(this)},setup:function(){this._setupMask(),toTabed(this.element),toTabed(this.get("trigger"))},_setupMask:function(){this.before("show",function(){this.get("hasMask")&&mask.show()}),this.before("hide",function(){this.get("hasMask")&&mask.hide()})},_onRenderTitle:function(val){$.isFunction(val)?this.get("titleElement").html(val.call(this)):this.get("titleElement").html(val)},_onRenderContent:function(val){$.isFunction(val)?this.get("contentElement").html(val.call(this)):this.get("contentElement").html(val)}});module.exports=BaseDialog});